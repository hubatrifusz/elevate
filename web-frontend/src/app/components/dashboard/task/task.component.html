@if (showConfirmDialog){
<app-confirm-dialog (dataEmitter)="deleteHabit($event)"></app-confirm-dialog>
}

<div class="task_container" #taskElement [ngStyle]="{ 'border-left': '1rem solid #' + habitData.color }">
  <div class="task_header_container">
    <div id="left">
      <!-- Checkbox for marking task done -->
      @if (isToday) {
      <div class="input_container" id="remember_me_checkbox_input_container">
        <input type="checkbox" #task_checkbox_input name="task_checkbox_input" id="{{ habitLogData.id }}"
          data-cy="task_checkbox_input" [checked]="habitLogData.completed" [formControl]="taskCheckbox"
          (change)="taskDone($event)" />
        <label for="{{ habitLogData.id }}" class="checkbox" #checkbox>
          <div class="checkmark" #checkmark></div>
        </label>
        <label for="{{ habitLogData.id }}" class="checkbox_label">{{ habitData.title }}</label>
      </div>
      } @else {
      <div class="input_container">
        <span class="habit-title">{{ habitData.title }}</span>
      </div>
      }
    </div>
    <div id="right">
      @if (isToday) {
      <div id="time_container">
        <img src="icons/flame.png" alt="clock" />
        <span>{{ habitData.streak }}</span>
      </div>
      } @else {
      <div id="future_container">
        <img src="icons/calendar.png" alt="calendar" />
        <span>Not for today</span>
      </div>
      }
      <div id="options_container">
        <img src="icons/menu-dots-vertical.png" alt="menu-dots-vertical" (click)="expandTask()" />
      </div>
    </div>
  </div>
  <div class="task_details_container">
    <!-- Description -->
    <div class="task_description">
      <p class="p_dark">Description:</p>
      <p>{{ habitData.description }}</p>
    </div>

    <!-- Notes -->
    <div class="task_notes">
      <div class="input_container">
        <!-- TODO make a textarea input -->
        <textarea name="" id="" placeholder="Add some notes" rows="3" [formControl]="notes"
          (blur)="saveNotes()"></textarea>
      </div>
    </div>

    <!-- Delete button -->
    <div id="task_actions">
      <div class="button_container" (click)="openConfirmationDialog()">
        <button class="button_delete"><span>Delete</span></button>
      </div>
    </div>
  </div>
</div>