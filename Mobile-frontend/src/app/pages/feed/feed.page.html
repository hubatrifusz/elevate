<div class="ion-page" id="main-content">
  <ion-header class="ion-no-border">
    <ion-toolbar>
      <ion-title slot="start">Hello <br> {{userName}}!</ion-title>
      <!-- <ion-icon  name="search-outline"></ion-icon> -->
      <ion-searchbar slot="start" show-clear-button="focus"></ion-searchbar>
      <ion-buttons slot="end">
        <ion-menu-toggle>
          <ion-button>
            <ion-icon class="icon" name="person-circle-outline"></ion-icon>
          </ion-button>
        </ion-menu-toggle>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>
  <ion-content class="ion-padding " [fullscreen]="true" [scrollEvents]="true" (ionScrollStart)="handleScrollStart()"
    (ionScroll)="handleScroll($any($event))" (ionScrollEnd)="handleScrollEnd()">
    <ion-fab horizontal="end" vertical="bottom" slot="fixed">
      <ion-fab-button (click)="newHabit()">
        <ion-icon name="add"></ion-icon>
      </ion-fab-button>
    </ion-fab>

    <h1 class="text-center" style="margin-bottom: 30px;">Tasks</h1>
    <app-task-card [loadMoreHabits]="loadMoreHabits" (hasMoreHabitsChange)="hasMoreHabits = $event"></app-task-card>


    <ion-infinite-scroll (ionInfinite)="onIonInfinite($event)" [disabled]="!hasMoreHabits">
      <ion-infinite-scroll-content loadingText="Please wait..." loadingSpinner="bubbles"></ion-infinite-scroll-content>
    </ion-infinite-scroll>

    @if(hasMoreHabits){
    }
  </ion-content>
</div>