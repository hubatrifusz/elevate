<ion-accordion-group expand="inset">
  @for(habit of habits ; track habit.id) {
  <ion-accordion>
    <ion-item slot="header" color="light" class="habit-item">
      <div class="color" [style.backgroundColor]="habit.color"></div>
      <ion-input [readonly]="true" type="text" [value]="habit.title"></ion-input>
      <div class="time">
        <ion-label>{{habit.streak}}</ion-label>
        <ion-icon name="flame-outline"></ion-icon>
      </div>
      <ion-checkbox slot="end" (click)="stopPropagation($event)"></ion-checkbox>
    </ion-item>
    <div class="ion-padding content" slot="content">
      <ion-textarea label="Description:" inputmode="text" [autoGrow]="true" [(ngModel)]="habit.description" (ionBlur)="onDescriptionBlur(habit)"
        maxlength="100"></ion-textarea>
      <ion-list>
        <ion-item>
          <ion-select aria-label="Frequency" interface="popover" label="Frequency:" placeholder="Select frequency"
            [(ngModel)]="habit.frequencyType" [value]="habit.frequencyType" (ionChange)="onFrequencyChange(habit, $event)">
            <ion-select-option value="Daily">Daily</ion-select-option>
            <ion-select-option value="Weekly">Weekly</ion-select-option>
            <ion-select-option value="Monthly">Montly</ion-select-option>
            <ion-select-option value="Custom">Custom</ion-select-option>
          </ion-select>
        </ion-item>
      </ion-list>
      @if(habit.frequencyType.toString() == "Custom"){
      <ion-grid>
        <ion-row class="day-selector">
          @for(day of weekDays ; track $index) {
          <ion-col>
            <ion-button [ngClass]="{'selected': isSelectedDay(habit.customFrequency, $index)}"
              (click)="toggleDay(habit, $index)" fill="clear">
              {{ day.label }}
            </ion-button>
          </ion-col>
          }
        </ion-row>
      </ion-grid>
      }
      <ion-item>
        <ion-label>Color:</ion-label>
        <ion-input type="color"  [(ngModel)]="habit.color" (ionChange)="onColorChange(habit, $event)"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label>Is it a Positive Habit?</ion-label>
        <ion-checkbox slot="end"  [(ngModel)]="habit.is_positive"
          (ionChange)="onPositiveChange(habit, $event)"></ion-checkbox>
      </ion-item>

      <ion-button class="delete" expand="block" color="danger" (click)="deleteHabit(habit)">
        Delete
        <ion-icon name="trash-outline"></ion-icon>
      </ion-button>


    </div>
  </ion-accordion>
  }
</ion-accordion-group>